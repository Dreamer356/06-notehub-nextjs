(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[151],{9711:function(e,t,n){Promise.resolve().then(n.bind(n,1464)),Promise.resolve().then(n.bind(n,6086)),Promise.resolve().then(n.bind(n,6299)),Promise.resolve().then(n.bind(n,4095)),Promise.resolve().then(n.bind(n,4738)),Promise.resolve().then(n.bind(n,152)),Promise.resolve().then(n.bind(n,6539)),Promise.resolve().then(n.bind(n,2868)),Promise.resolve().then(n.bind(n,2561)),Promise.resolve().then(n.bind(n,9714)),Promise.resolve().then(n.bind(n,8186)),Promise.resolve().then(n.bind(n,8494)),Promise.resolve().then(n.bind(n,9988))},1464:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var s=n(3827),i=n(4090),o=n(6086),r=n(4095),a=n(9988),l=n(8186),u=n(826),c=n(349),d=n.n(c);function _(e){let{value:t,onChange:n}=e;return(0,s.jsx)("div",{className:d().container,children:(0,s.jsx)("input",{type:"text",value:t,onChange:e=>n(e.target.value),placeholder:"Search notes...",className:d().input})})}var h=n(6730),m=n.n(h);function f(e){let{onSubmit:t}=e,[n,o]=i.useState(""),[r,a]=i.useState("");return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n.trim()&&r.trim()&&(t({title:n,content:r}),o(""),a(""))},className:m().form,children:[(0,s.jsx)("input",{type:"text",value:n,onChange:e=>o(e.target.value),placeholder:"Title",className:m().input}),(0,s.jsx)("textarea",{value:r,onChange:e=>a(e.target.value),placeholder:"Content",className:m().textarea}),(0,s.jsx)("button",{type:"submit",className:m().button,children:"Add note"})]})}var v=n(8792),x=n(1155),N=n.n(x);function b(e){let{notes:t,onDelete:n}=e;return 0===t.length?(0,s.jsx)("p",{children:"No notes found."}):(0,s.jsx)("ul",{className:N().list,children:t.map(e=>(0,s.jsxs)("li",{className:N().item,children:[(0,s.jsx)("h3",{className:N().title,children:e.title}),(0,s.jsx)("p",{className:N().content,children:e.content}),(0,s.jsxs)("div",{className:N().actions,children:[(0,s.jsx)(v.default,{href:"/notes/".concat(e.id),className:N().link,children:"View details"}),(0,s.jsx)("button",{type:"button",className:N().button,onClick:()=>n(e.id),children:"Delete"})]})]},e.id))})}function p(e){let{dehydratedState:t}=e;return(0,s.jsx)(o.Hydrate,{state:t,children:(0,s.jsx)(j,{})})}function j(){let e=(0,r.useQueryClient)(),[t,n]=i.useState(""),{data:o=[],isLoading:c,error:d}=(0,a.useQuery)(["notes"],u.jO),h=(0,l.useMutation)({mutationFn:u.kT,onSuccess:()=>{e.invalidateQueries(["notes"])}}),m=(0,l.useMutation)({mutationFn:u.f_,onSuccess:()=>{e.invalidateQueries(["notes"])}});if(c)return(0,s.jsx)("p",{children:"Loading, please wait..."});if(d)return(0,s.jsx)("p",{children:"Could not fetch the list of notes."});let v=o.filter(e=>e.title.toLowerCase().includes(t.toLowerCase())||e.content.toLowerCase().includes(t.toLowerCase()));return(0,s.jsxs)("main",{children:[(0,s.jsx)(_,{value:t,onChange:n}),(0,s.jsx)(f,{onSubmit:e=>{h.mutate(e)}}),(0,s.jsx)(b,{notes:v,onDelete:e=>{m.mutate(e)}})]})}},826:function(e,t,n){"use strict";n.d(t,{f_:function(){return d},jO:function(){return l},kT:function(){return c},nb:function(){return u}});var s=n(3107),i=n(9079);let o=i.env.NEXT_PUBLIC_NOTEHUB_BASE_URL||"https://notehub-public.goit.study/api",r=i.env.NEXT_PUBLIC_NOTEHUB_TOKEN,a=s.Z.create({baseURL:o,headers:r?{Authorization:"Bearer ".concat(r)}:void 0}),l=async()=>{let{data:e}=await a.get("/notes");return e},u=async e=>{let{data:t}=await a.get("/notes/".concat(e));return t},c=async e=>{let{data:t}=await a.post("/notes",e);return t},d=async e=>{await a.delete("/notes/".concat(e))}},6730:function(e){e.exports={form:"NoteForm_form__kBK_0",input:"NoteForm_input__28hgd",textarea:"NoteForm_textarea__kzing",button:"NoteForm_button__Xm_YH"}},1155:function(e){e.exports={list:"NoteList_list__shWPg",item:"NoteList_item__IZ4VJ",title:"NoteList_title__yrB3L",content:"NoteList_content__K8ntu",actions:"NoteList_actions__mCGmv",link:"NoteList_link__Q73wC",button:"NoteList_button__J1AiO"}},349:function(e){e.exports={container:"SearchBox_container__Evt6h",input:"SearchBox_input__0g6b5"}}},function(e){e.O(0,[570,674,792,971,69,744],function(){return e(e.s=9711)}),_N_E=e.O()}]);